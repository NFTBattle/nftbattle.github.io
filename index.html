<html>
	<head>
		<title>Bloot Tanks</title>

<script>
//SET THESE BEFORE DEPLOY
var POLYGAMEADDRESS = '0x3e52eDf85Bd43653Ff6Dd27ea5AA1bFCcF41613d';
</script>	
	
	  
<script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js"></script>  
<script src="https://cdn.jsdelivr.net/npm/web3@latest/dist/web3.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bignumber.js@latest/bignumber.js"></script>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-F3w7mX95PdgyTmZZMECAngseQB83DfGTowi0iMjiWaeVhAn4FJkqJByhZMI3AhiU" crossorigin="anonymous">

<link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@700&display=swap" rel="stylesheet">


<style>
body {
  background-color: #ffffff;
  margin: 0;
  padding: 0;
  color: black;
  font: 1.3rem Inconsolata, monospace;
}

::selection {
  background: #0080FF;
  text-shadow: none;
}
.txlink{
	color:black;
	font-size: medium;
	text-decoration: none;
}
a{
	color:black;
}
table {
  border-collapse: collapse;
}

th, td {
  text-align: left;
  padding: 8px;
}

tr:nth-child(even) {background-color: #262626;}


.modal-window {
  position: fixed;
  
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
  z-index: 999;
  visibility: hidden;
  opacity: 100;
  
 
    width: 400px;
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    padding: 2em;
    background: white;
  }
  header {
    font-weight: bold;
  }
  h1 {
    font-size: 150%;
    margin: 0 0 15px;
  }
}


.div-block-38{
	cursor: pointer;
	}
	.close {
  float: right;
  font-size: 21px;
  font-weight: 700;
  line-height: 1;
  color: #000;
  text-shadow: 0 1px 0 #fff;
  filter: alpha(opacity=20);
  opacity: .2;
}
    </style>


	</head>
	<body>

<div width="100%" height="90" style="background:#01ff01;box-shadow: rgb(4 17 29 / 25%) 0px 0px 8px 0px;">
<table width="100%"><tr><td width="25%">
	Bloot Tanks
</td><td>
	<div  align="right" id="mmconnectbtn" ><a href="javascript:connectWallet();" class="btn btn-primary">Connect Wallet</a></div>
</td></tr></table>

</div>


<br><br>

<div class="col-sm-12"  style="padding:1rem;">
	<div class="row">
		<div class="col-sm-1">
			
		</div>
		<div class="col-sm-5" style="padding:1rem;" valign="top">
		<img src="gen2.svg" width="100%" height="100%">
		</div>
		<div class="col-sm-5">
			<b>Bloot Tank #1</b><br><br>
			
			<p style="font-size:12pt;">Probably worthless... Tanks attributes are randomly generated using Chainlink VRF and have 100% on-chain art and metadata. <br><br>
			
			Activate Battle Mode to risk your stats against other tanks and increase your power when you win. Randomization powered by Chainlink<br><br>
			
			</p>
			
		</div>
	</div>
</div>





<br><bR><br>


<div width="90%" align="center"><small><small><small>This game is for educational and experimental purposes only. Bloot tanks were minted for free to all Bloot Holders. Investing any amount of money into Bloot Tanks would not be advisable.</small></small></small></div>


<script>
	
	
var contractGAME = '[ { "inputs": [], "stateMutability": "nonpayable", "type": "constructor" }, { "anonymous": false, "inputs": [ { "indexed": true, "internalType": "address", "name": "owner", "type": "address" }, { "indexed": true, "internalType": "address", "name": "approved", "type": "address" }, { "indexed": true, "internalType": "uint256", "name": "tokenId", "type": "uint256" } ], "name": "Approval", "type": "event" }, { "anonymous": false, "inputs": [ { "indexed": true, "internalType": "address", "name": "owner", "type": "address" }, { "indexed": true, "internalType": "address", "name": "operator", "type": "address" }, { "indexed": false, "internalType": "bool", "name": "approved", "type": "bool" } ], "name": "ApprovalForAll", "type": "event" }, { "anonymous": false, "inputs": [ { "indexed": true, "internalType": "uint256", "name": "id", "type": "uint256" }, { "indexed": false, "internalType": "uint256", "name": "battlestring", "type": "uint256" } ], "name": "BattleNow", "type": "event" }, { "anonymous": false, "inputs": [ { "indexed": true, "internalType": "uint256", "name": "id", "type": "uint256" }, { "indexed": false, "internalType": "uint256", "name": "battlewinner", "type": "uint256" }, { "indexed": false, "internalType": "uint8", "name": "statmod", "type": "uint8" } ], "name": "BattleWinner", "type": "event" }, { "anonymous": false, "inputs": [ { "indexed": true, "internalType": "uint256", "name": "id", "type": "uint256" }, { "indexed": false, "internalType": "uint256", "name": "dna", "type": "uint256" } ], "name": "GenerateTank", "type": "event" }, { "anonymous": false, "inputs": [ { "indexed": true, "internalType": "address", "name": "previousOwner", "type": "address" }, { "indexed": true, "internalType": "address", "name": "newOwner", "type": "address" } ], "name": "OwnershipTransferred", "type": "event" }, { "anonymous": false, "inputs": [ { "indexed": false, "internalType": "address", "name": "account", "type": "address" } ], "name": "Paused", "type": "event" }, { "anonymous": false, "inputs": [ { "indexed": true, "internalType": "address", "name": "from", "type": "address" }, { "indexed": true, "internalType": "address", "name": "to", "type": "address" }, { "indexed": true, "internalType": "uint256", "name": "tokenId", "type": "uint256" } ], "name": "Transfer", "type": "event" }, { "anonymous": false, "inputs": [ { "indexed": false, "internalType": "address", "name": "account", "type": "address" } ], "name": "Unpaused", "type": "event" }, { "inputs": [ { "internalType": "uint256", "name": "battlestringin", "type": "uint256" }, { "internalType": "uint256", "name": "player1", "type": "uint256" }, { "internalType": "uint256", "name": "player2", "type": "uint256" } ], "name": "_testBattle", "outputs": [], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [ { "internalType": "uint256", "name": "_tokenId", "type": "uint256" }, { "internalType": "uint256", "name": "mod_speed", "type": "uint256" }, { "internalType": "uint256", "name": "mod_armor", "type": "uint256" }, { "internalType": "uint256", "name": "mod_cannon", "type": "uint256" }, { "internalType": "uint256", "name": "mod_speed_dec", "type": "uint256" }, { "internalType": "uint256", "name": "mod_armor_dec", "type": "uint256" }, { "internalType": "uint256", "name": "mod_cannon_dec", "type": "uint256" } ], "name": "_testChangeMeta", "outputs": [], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [], "name": "_testMint", "outputs": [], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [ { "internalType": "address", "name": "to", "type": "address" }, { "internalType": "uint256", "name": "tokenId", "type": "uint256" } ], "name": "approve", "outputs": [], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [ { "internalType": "address", "name": "owner", "type": "address" } ], "name": "balanceOf", "outputs": [ { "internalType": "uint256", "name": "", "type": "uint256" } ], "stateMutability": "view", "type": "function" }, { "inputs": [], "name": "baseURI", "outputs": [ { "internalType": "string", "name": "", "type": "string" } ], "stateMutability": "view", "type": "function" }, { "inputs": [ { "internalType": "uint256", "name": "_userProvidedSeed", "type": "uint256" }, { "internalType": "uint256", "name": "player1", "type": "uint256" }, { "internalType": "uint256", "name": "player2", "type": "uint256" } ], "name": "doBattle", "outputs": [], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [ { "internalType": "uint256", "name": "tankid", "type": "uint256" }, { "internalType": "uint256", "name": "_randomNumber", "type": "uint256" } ], "name": "fulfillRandomnessManual", "outputs": [], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [ { "internalType": "uint256", "name": "_quantity", "type": "uint256" } ], "name": "generateTank", "outputs": [], "stateMutability": "payable", "type": "function" }, { "inputs": [ { "internalType": "uint256", "name": "tokenId", "type": "uint256" } ], "name": "getApproved", "outputs": [ { "internalType": "address", "name": "", "type": "address" } ], "stateMutability": "view", "type": "function" }, { "inputs": [ { "internalType": "uint256", "name": "_tokenId", "type": "uint256" } ], "name": "imageData", "outputs": [ { "internalType": "string", "name": "", "type": "string" } ], "stateMutability": "view", "type": "function" }, { "inputs": [ { "internalType": "address", "name": "owner", "type": "address" }, { "internalType": "address", "name": "operator", "type": "address" } ], "name": "isApprovedForAll", "outputs": [ { "internalType": "bool", "name": "", "type": "bool" } ], "stateMutability": "view", "type": "function" }, { "inputs": [], "name": "linkpeg", "outputs": [ { "internalType": "contract LINKTOKEN", "name": "", "type": "address" } ], "stateMutability": "view", "type": "function" }, { "inputs": [], "name": "linkpegswap", "outputs": [ { "internalType": "contract PegSwap", "name": "", "type": "address" } ], "stateMutability": "view", "type": "function" }, { "inputs": [], "name": "linktoken", "outputs": [ { "internalType": "contract LINKTOKEN", "name": "", "type": "address" } ], "stateMutability": "view", "type": "function" }, { "inputs": [ { "internalType": "uint256", "name": "_tokenId", "type": "uint256" } ], "name": "metadata", "outputs": [ { "internalType": "string", "name": "", "type": "string" } ], "stateMutability": "view", "type": "function" }, { "inputs": [], "name": "name", "outputs": [ { "internalType": "string", "name": "", "type": "string" } ], "stateMutability": "view", "type": "function" }, { "inputs": [], "name": "owner", "outputs": [ { "internalType": "address", "name": "", "type": "address" } ], "stateMutability": "view", "type": "function" }, { "inputs": [ { "internalType": "uint256", "name": "tokenId", "type": "uint256" } ], "name": "ownerOf", "outputs": [ { "internalType": "address", "name": "", "type": "address" } ], "stateMutability": "view", "type": "function" }, { "inputs": [], "name": "pauseSale", "outputs": [], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [], "name": "paused", "outputs": [ { "internalType": "bool", "name": "", "type": "bool" } ], "stateMutability": "view", "type": "function" }, { "inputs": [ { "internalType": "bytes32", "name": "requestId", "type": "bytes32" }, { "internalType": "uint256", "name": "randomness", "type": "uint256" } ], "name": "rawFulfillRandomness", "outputs": [], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [], "name": "renounceOwnership", "outputs": [], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [ { "internalType": "address", "name": "from", "type": "address" }, { "internalType": "address", "name": "to", "type": "address" }, { "internalType": "uint256", "name": "tokenId", "type": "uint256" } ], "name": "safeTransferFrom", "outputs": [], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [ { "internalType": "address", "name": "from", "type": "address" }, { "internalType": "address", "name": "to", "type": "address" }, { "internalType": "uint256", "name": "tokenId", "type": "uint256" }, { "internalType": "bytes", "name": "_data", "type": "bytes" } ], "name": "safeTransferFrom", "outputs": [], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [ { "internalType": "address", "name": "operator", "type": "address" }, { "internalType": "bool", "name": "approved", "type": "bool" } ], "name": "setApprovalForAll", "outputs": [], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [ { "internalType": "string", "name": "_baseURI", "type": "string" } ], "name": "setBaseURI", "outputs": [], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [ { "internalType": "uint256", "name": "_LinkFee", "type": "uint256" } ], "name": "setLinkFee", "outputs": [], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [ { "internalType": "uint256", "name": "player1", "type": "uint256" }, { "internalType": "uint256", "name": "player2", "type": "uint256" } ], "name": "startBattle", "outputs": [], "stateMutability": "payable", "type": "function" }, { "inputs": [ { "internalType": "bytes4", "name": "interfaceId", "type": "bytes4" } ], "name": "supportsInterface", "outputs": [ { "internalType": "bool", "name": "", "type": "bool" } ], "stateMutability": "view", "type": "function" }, { "inputs": [], "name": "symbol", "outputs": [ { "internalType": "string", "name": "", "type": "string" } ], "stateMutability": "view", "type": "function" }, { "inputs": [], "name": "tank0", "outputs": [ { "internalType": "contract NFTArt", "name": "", "type": "address" } ], "stateMutability": "view", "type": "function" }, { "inputs": [], "name": "tank1", "outputs": [ { "internalType": "contract NFTArt", "name": "", "type": "address" } ], "stateMutability": "view", "type": "function" }, { "inputs": [], "name": "tank2", "outputs": [ { "internalType": "contract NFTArt", "name": "", "type": "address" } ], "stateMutability": "view", "type": "function" }, { "inputs": [], "name": "tank3", "outputs": [ { "internalType": "contract NFTArt", "name": "", "type": "address" } ], "stateMutability": "view", "type": "function" }, { "inputs": [], "name": "tank4", "outputs": [ { "internalType": "contract NFTArt", "name": "", "type": "address" } ], "stateMutability": "view", "type": "function" }, { "inputs": [ { "internalType": "uint256", "name": "_tokenId", "type": "uint256" } ], "name": "tankdata", "outputs": [ { "internalType": "uint256[]", "name": "", "type": "uint256[]" } ], "stateMutability": "view", "type": "function" }, { "inputs": [ { "internalType": "uint256", "name": "index", "type": "uint256" } ], "name": "tokenByIndex", "outputs": [ { "internalType": "uint256", "name": "", "type": "uint256" } ], "stateMutability": "view", "type": "function" }, { "inputs": [ { "internalType": "address", "name": "owner", "type": "address" }, { "internalType": "uint256", "name": "index", "type": "uint256" } ], "name": "tokenOfOwnerByIndex", "outputs": [ { "internalType": "uint256", "name": "", "type": "uint256" } ], "stateMutability": "view", "type": "function" }, { "inputs": [ { "internalType": "uint256", "name": "_tokenId", "type": "uint256" } ], "name": "tokenURI", "outputs": [ { "internalType": "string", "name": "", "type": "string" } ], "stateMutability": "view", "type": "function" }, { "inputs": [], "name": "totalSupply", "outputs": [ { "internalType": "uint256", "name": "", "type": "uint256" } ], "stateMutability": "view", "type": "function" }, { "inputs": [ { "internalType": "address", "name": "from", "type": "address" }, { "internalType": "address", "name": "to", "type": "address" }, { "internalType": "uint256", "name": "tokenId", "type": "uint256" } ], "name": "transferFrom", "outputs": [], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [ { "internalType": "address", "name": "newOwner", "type": "address" } ], "name": "transferOwnership", "outputs": [], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [], "name": "uniswapRouter", "outputs": [ { "internalType": "contract IUniswapV2Router02", "name": "", "type": "address" } ], "stateMutability": "view", "type": "function" }, { "inputs": [], "name": "unpauseSale", "outputs": [], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [], "name": "withdraw", "outputs": [], "stateMutability": "nonpayable", "type": "function" }, { "stateMutability": "payable", "type": "receive" } ]';

function roundToTwo(num) { // decimal rounding    
    return +(Math.round(num + "e+4")  + "e-4");
}



	
async function switchNetwork(){

	var jsonnetwork = [
    {
      "chainId": "0x89",
      "chainName": "Polygon Matic",
      "rpcUrls": ["https://rpc-mainnet.matic.network"],
      "nativeCurrency": {
        "name": "MATIC",
        "symbol": "MATIC",
        "decimals": 18
      }
    }
	];		
		console.log("switching network");

		const tx = await window.ethereum.request({method: 'wallet_addEthereumChain', params:jsonnetwork});
		
		$('.modal-window').css("visibility", "hidden");
		//getAllStatus();
        
}
	
	

async function getAllStatus(){
	
console.log("getting status");

	
var contract = new web3.eth.Contract(JSON.parse(contractGAME), POLYGAMEADDRESS);
let resulteth = await contract.methods.allSpotStatus().call();

console.log("allSpotStatus");
console.log(resulteth);
console.log("---------------------------------");

//updateGameBoard(resulteth);	 				 
				 	
				 
}

function disconnectMM(){
	<a href="javascript:connectWallet();" class="btn btn-primary">Connect Wallet</a>
	
	}


async function connectMM(){
	
    // Modern dapp browsers...
    if (window.ethereum) {
        window.web3 = new Web3(ethereum);
        try {
            // Request account access if needed
            
var accountsOnEnable = await ethereum.request({method: 'eth_requestAccounts'});
console.log(accountsOnEnable[0]);

web3.eth.defaultAccount = accountsOnEnable[0];

            // Acccounts now exposed
            console.log("metamask connected");
            
            $('#mmconnectbtn').text("Disconnect");
            
            //check chain
            const chainId = await ethereum.request({ method: 'eth_chainId' });

            console.log("chainid:"+chainId);
            
            if(chainId == "0x89" || chainId == "0x137"){
	            
	            
			$('#statusinfo').html("");
			$('.modal-window').css("visibility", "hidden");
            
            getAllStatus();
            setInterval(getAllStatus, 60000);
            
            }else{
	            
			$('#statusinfo').html("<br><Br><div align='center'>Please connect to POLYGON MAINNET<br><br><div class='div-block-36'><div class='text-block-7'  onclick='switchNetwork();'>CONNECT</div></div></div>");

	            
	        }
            
        } catch (error) {
            // User denied account access...
        }
    }
}

$( document ).ready(function() {
    console.log( "ready!" );
    $('.modal-window').css("visibility", "visible");
	connectMM();
});






</script>

  <script src="https://d3e54v103j8qbb.cloudfront.net/js/jquery-3.5.1.min.dc5e7f18c8.js" type="text/javascript" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
  <script src="js/surfswap.js" type="text/javascript"></script>
  <!-- [if lte IE 9]><script src="https://cdnjs.cloudflare.com/ajax/libs/placeholders/3.0.2/placeholders.min.js"></script><![endif] -->
  
  
<div id="modal" class="modal filter modal-window" style="border:1px solid black;">
  <div>
    <a href="#close" onclick="$('.modal-window').css('visibility', 'hidden');" class="close">X</a>

<div id="statusinfo">
	
<div align="center">
Connecting to chain...
</div>

</div>


    </div>
</div>



	</body>		
</html>
